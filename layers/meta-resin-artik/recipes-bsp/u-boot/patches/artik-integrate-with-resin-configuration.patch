From b04f97cf90344af54a620d2de7587760853206fe Mon Sep 17 00:00:00 2001
From: Andrei Gherzan <andrei@resin.io>
Date: Wed, 4 Jan 2017 16:09:39 +0100
Subject: artik_common.h: Integrate with resin environment configuration

Artik (5 and 10) machine specific integration of resin environment
configuration.

Signed-off-by: Andrei Gherzan <andrei@resin.io>

Upstream-Status: Inappropriate [configuration]

---
 include/configs/artik_common.h | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/include/configs/artik_common.h b/include/configs/artik_common.h
index 9aeb14c..dba64e2 100644
--- a/include/configs/artik_common.h
+++ b/include/configs/artik_common.h
@@ -321,8 +321,11 @@
 		"rootfstype=ext4 ${opts} ${recoverymode} "		\
 		"asix.macaddr=${ethaddr} bd_addr=${bd_addr};"		\
 		"run boot_cmd_initrd\0"					\
-	"mmcboot=setenv bootargs ${console} "				\
-		"root=/dev/mmcblk${rootdev}p${rootpart} ${root_rw} "	\
+	"mmcboot=setenv resin_mmcdev 0;"\
+		"setenv resin_kernel_load_addr ${kernel_addr};"\
+		"run resin_set_kernel_root;" \
+		"setenv bootargs ${console} "				\
+		"${resin_kernel_root} ${root_rw} "	\
 		"rootfstype=ext4 ${opts};run boot_cmd\0"		\
 	"bootcmd=run ramfsboot\0"
 
-- 
2.7.4

